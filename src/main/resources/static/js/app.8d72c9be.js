(function(t){function e(e){for(var n,c,s=e[0],i=e[1],u=e[2],d=0,f=[];d<s.length;d++)c=s[d],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&f.push(o[c][0]),o[c]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);l&&l(e);while(f.length)f.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],n=!0,s=1;s<r.length;s++){var i=r[s];0!==o[i]&&(n=!1)}n&&(a.splice(e--,1),t=c(c.s=r[0]))}return t}var n={},o={app:0},a=[];function c(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=t,c.c=n,c.d=function(t,e,r){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(r,n,function(e){return t[e]}.bind(null,n));return r},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=i;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"4d42":function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("7a23");function o(t,e,r,o,a,c){var s=Object(n["O"])("router-view");return Object(n["E"])(),Object(n["g"])(s)}var a={name:"App",components:{}},c=(r("8eb3"),r("d959")),s=r.n(c);const i=s()(a,[["render",o]]);var u=i,l={class:"login main"},d=Object(n["j"])("div",{class:"footer"},[Object(n["j"])("div",{class:""},[Object(n["j"])("div",{class:""},"© 2021 Акционерная фирма «САММЕР ДЕЙ БАНК». Генеральная лицензия Центрального Банка Гогвардса №5 выдана 10.09.3010 г. ")])],-1);function f(t,e,r,o,a,c){var s=Object(n["O"])("AuthForm");return Object(n["E"])(),Object(n["i"])(n["a"],null,[Object(n["j"])("div",l,[Object(n["m"])(s)]),d],64)}var b={class:"auth-block"},p={class:"logo-header"},j={class:"auth-from-block"},O={autocomplete:"off",class:"",id:"homeAuth"},g={class:""},m={class:""},v={class:"auth-button-wrapper"},h=Object(n["l"])("Войти");function w(t,e,r,o,a,c){var s=Object(n["O"])("dev"),i=Object(n["O"])("va-input"),u=Object(n["O"])("va-button");return Object(n["E"])(),Object(n["i"])("div",b,[Object(n["j"])("header",p,[Object(n["m"])(s,{"data-unit":"icon",class:"logo-image"})]),Object(n["j"])("div",j,[Object(n["j"])("form",O,[Object(n["j"])("div",g,[Object(n["m"])(i,{class:"mb-4",modelValue:a.login,"onUpdate:modelValue":e[0]||(e[0]=function(t){return a.login=t}),label:"Имя пользователя","error-messages":a.errorLoginMsg,error:a.errorLogin},null,8,["modelValue","error-messages","error"])]),Object(n["j"])("div",m,[Object(n["m"])(i,{type:"password",class:"mb-4",modelValue:a.password,"onUpdate:modelValue":e[1]||(e[1]=function(t){return a.password=t}),label:"Пароль","error-messages":a.errorPasswordMsg,error:a.errorPassword},null,8,["modelValue","error-messages","error"])]),Object(n["j"])("div",v,[Object(n["m"])(u,{rounded:!1,loading:a.loading,class:"",onClick:c.auth},{default:Object(n["Z"])((function(){return[h]})),_:1},8,["loading","onClick"])])])])])}r("d3b7"),r("25f0");var y=r("b1ac"),P=r("7ca5"),S=r("bc3a"),M=r.n(S);function N(){return"X-AUTH-TOKEN"}function k(){return 3e4}function E(){var t=N(),e=M.a.create({baseURL:"http://localhost:8081",timeout:k(),headers:{tokenName:localStorage.getItem(N())}});return e.interceptors.request.use((function(e){return e.headers[t]=localStorage.getItem(N()),e}),(function(t){return Promise.reject(t)})),e.interceptors.response.use((function(t){return t}),(function(t){return 401==t.response.status&&(localStorage.removeItem(N()),pt.push("/")),Promise.reject(t)})),e}var L=E(),A=r("6c27"),_={name:"AuthForm",props:{msg:String,components:{VaButton:y["a"],VaInput:P["a"]}},data:function(){return{login:"",password:"",loading:!1,errorLogin:!1,errorPassword:!1,errorLoginMsg:"",errorPasswordMsg:""}},methods:{auth:function(){var t=this;this.errorLogin=!1,this.errorPassword=!1,this.errorLoginMsg="",this.errorPasswordMsg="",this.loading=!0;var e=Object(A["sha256"])((Math.random()+1).toString(36).substring(7)+Math.random()),r=Object(A["sha256"])(e+Object(A["sha256"])(this.password));L.post("auth",{login:this.login,salt:e,password:r}).then((function(e){var r=e.data;localStorage.setItem("X-AUTH-TOKEN",r),t.loading=!1,pt.push({name:"main"})}),(function(e){t.loading=!1;var r=JSON.parse(JSON.stringify(e));t.errorLogin=!0,t.errorLoginMsg=401==r.status?"Клиент с указанными данными не найден":"Ошибка авторизации"})).catch((function(e){t.loading=!1}))}}};r("ccdc");const x=s()(_,[["render",w]]);var J=x,V=(r("d1e78"),{name:"LoginPage",components:{AuthForm:J},props:{msg:String}});r("dc27");const I=s()(V,[["render",f]]);var U=I;function T(t,e){return Object(n["E"])(),Object(n["i"])("h1",null,"Указанная страница не найдена. Пожалуйста расскажите нам об этом")}const q={},C=s()(q,[["render",T]]);var F=C,R=r("6c02"),H={class:"dashboard-body"};function K(t,e,r,o,a,c){var s=Object(n["O"])("Nav"),i=Object(n["O"])("Products");return Object(n["E"])(),Object(n["i"])(n["a"],null,[Object(n["m"])(s),Object(n["j"])("div",H,[Object(n["m"])(i)])],64)}var X={class:"nav-header"},Z={class:"nav-grid"},B=Object(n["j"])("div",{class:"nav-logo"},[Object(n["j"])("a",{class:"logo",href:"javascript:;",title:"Главная"})],-1),z=Object(n["j"])("div",{class:"nav-break wrapper"},null,-1),D={class:"client-info"},G=Object(n["j"])("i",{class:"material-icons user-icon"},"person",-1),Q=Object(n["j"])("i",{class:"material-icons"},"exit_to_app",-1),W=[Q],Y=Object(n["j"])("div",null,null,-1);function $(t,e,r,o,a,c){var s=Object(n["O"])("router-link");return Object(n["E"])(),Object(n["i"])("header",X,[Object(n["j"])("div",Z,[B,z,(Object(n["E"])(!0),Object(n["i"])(n["a"],null,Object(n["M"])(t.routes,(function(t){return Object(n["E"])(),Object(n["i"])("div",{class:"menu-wrapper",key:t.id},[Object(n["m"])(s,{to:t,class:"nav-link","active-class":"active"},{default:Object(n["Z"])((function(){return[Object(n["l"])(Object(n["R"])(t.title),1)]})),_:2},1032,["to"])])})),128)),Object(n["j"])("div",D,[G,Object(n["j"])("span",null,Object(n["R"])(t.clientName),1),Object(n["j"])("a",{onClick:e[0]||(e[0]=function(){return c.logout&&c.logout.apply(c,arguments)}),class:"nav-link logout-icon","active-class":"active"},W)]),Y])])}var tt=r("94ed"),et={name:"Nav",props:{},data:function(){return{routes:[{id:"1",title:"Продукты"},{id:"2",title:"Оплата услуг"},{id:"3",title:"История"}],clientName:"",svgPath:tt["a"]}},methods:{logout:function(){var t=this;L.get("/logout").then((function(t){localStorage.removeItem(N()),pt.push("/")}),(function(e){var r=JSON.parse(JSON.stringify(e));t.errorLoginMsg=401==r.status?"Клиент с указанными данными не найден":"Ошибка"})).catch((function(e){t.loading=!1}))}},mounted:function(){var t=this;L.get("/api/client-info").then((function(e){t.clientName=e.data.firstName+" "+e.data.middleName}),(function(e){var r=JSON.parse(JSON.stringify(e));t.errorLoginMsg=401==r.status?"Клиент с указанными данными не найден":"Ошибка авторизации"})).catch((function(e){t.loading=!1}))}};r("5c75");const rt=s()(et,[["render",$]]);var nt=rt,ot={class:"product-block"};function at(t,e,r,o,a,c){return Object(n["E"])(),Object(n["i"])("div",ot)}var ct={name:"Products",components:{},props:{}};r("582a");const st=s()(ct,[["render",at]]);var it=st,ut={name:"Main",components:{Products:it,Nav:nt},props:{}};r("fcf5");const lt=s()(ut,[["render",K]]);var dt=lt,ft=[{path:"/client/login",name:"login",component:U},{path:"/client/main",name:"main",component:dt,meta:{requiresAuth:!0}},{path:"/:catchAll(.*)",component:F}],bt=Object(R["a"])({history:Object(R["b"])(),routes:ft});bt.beforeEach((function(t,e,r){t.matched.some((function(t){return t.meta.requiresAuth}))?null==localStorage.getItem(N())?r({path:"/client/login",params:{nextUrl:t.fullPath}}):r():"/client/login"==t.fullPath?r():r({path:"/client/login",params:{nextUrl:t.fullPath}})}));var pt=bt,jt=r("46f3");r("4821");Object(n["f"])(u).use(pt).use(jt["a"]).mount("#app")},"582a":function(t,e,r){"use strict";r("d38e")},"5a75":function(t,e,r){},"5b9f":function(t,e,r){},"5c75":function(t,e,r){"use strict";r("8833")},8833:function(t,e,r){},"8eb3":function(t,e,r){"use strict";r("e5e7")},ccdc:function(t,e,r){"use strict";r("5b9f")},d38e:function(t,e,r){},dc27:function(t,e,r){"use strict";r("4d42")},e5e7:function(t,e,r){},fcf5:function(t,e,r){"use strict";r("5a75")}});
//# sourceMappingURL=app.8d72c9be.js.map